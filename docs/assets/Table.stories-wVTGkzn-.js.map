{"version":3,"file":"Table.stories-wVTGkzn-.js","sources":["../../src/components/table/Table.vue"],"sourcesContent":["<template>\r\n  <div\r\n    :class=\"[\r\n      {\r\n        'table-sticky': sticky,\r\n        'table-scroll': scroll\r\n      }\r\n    ]\"\r\n    :style=\"[\r\n      {\r\n        height: scroll ? typeof height === 'number' ? `${height}px` : height : undefined\r\n      }\r\n    ]\"\r\n  >\r\n  <table\r\n    id=\"main-table\"\r\n    class=\"table is-fullwidth main-table mobile-optimised\"\r\n    :class=\"[\r\n      {\r\n        'is-bordered': bordered,\r\n        'is-striped': striped,\r\n        'is-hoverable': hoverable,\r\n        'is-narrow': narrowed,\r\n      }\r\n    ]\"\r\n  >\r\n    <caption v-if=\"title\">{{ title }}</caption>\r\n    <thead>\r\n      <tr\r\n        v-for=\"[i, columns1] in columnsHeader.entries()\"\r\n      >\r\n        <th\r\n          v-for=\"column in columns1\"\r\n          :key=\"column.key || column.dataIndex\"\r\n          scope=\"col\"\r\n          :colspan=\"column.colspan\"\r\n          :rowspan=\"column.colspan === 1 ? columnsHeader.length - i : undefined\"\r\n          :class=\"{\r\n            'column-fixed-left': column.fixed === 'left' || column.fixed === true,\r\n            'column-fixed-right': column.fixed === 'right',\r\n          }\"\r\n          :style=\"{\r\n            width: column.colspan === 1 ? typeof column.width === 'number' ? `${column.width}px` : column.width : undefined,\r\n            left: column.fixed === 'left' || column.fixed === true ? `${column.fixedLeft}px` : undefined,\r\n            right: column.fixed === 'right' ? `${column.fixedRight}px` : undefined,\r\n          }\"\r\n        >\r\n          {{ column.title }}\r\n        </th>\r\n      </tr>\r\n    </thead>\r\n    <tbody>\r\n      <tr v-for=\"data of dataSources\">\r\n        <td\r\n          v-for=\"column in columnsBody\"\r\n          :key=\"column.key || column.dataIndex\"\r\n          :data-th=\"column.title\"\r\n          :class=\"{\r\n            'column-fixed-left': column.fixed === 'left' || column.fixed === true,\r\n            'column-fixed-right': column.fixed === 'right',\r\n          }\"\r\n          :style=\"{\r\n            width: column.colspan === 1 ? typeof column.width === 'number' ? `${column.width}px` : column.width : undefined,\r\n            left: column.fixed === 'left' || column.fixed === true ? `${column.fixedLeft}px` : undefined,\r\n            right: column.fixed === 'right' ? `${column.fixedRight}px` : undefined,\r\n          }\"\r\n        >\r\n          {{ data[column.dataIndex] }}\r\n        </td>\r\n      </tr>\r\n    </tbody>\r\n    <!-- <tfoot>\r\n      <tr>\r\n        <td class=\"column-fixed-left\">Footer 1</td>\r\n        <td>Footer 2</td>\r\n        <td>Footer 3</td>\r\n        <td>Footer 4</td>\r\n        <td>Footer 5</td>\r\n        <td>Footer 6</td>\r\n        <td>Footer 7</td>\r\n        <td>Footer 8</td>\r\n      </tr>\r\n    </tfoot> -->\r\n  </table>\r\n</div>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { defineProps, PropType, onMounted, computed } from 'vue';\r\n// @ts-ignore\r\nimport { ColumnProp, ColumnTable } from './types';\r\n\r\nconst props = defineProps({\r\n  /**\r\n   * Title of this table\r\n   */\r\n  title: {\r\n    type: String,\r\n  },\r\n  /**\r\n   * Columns of table config\r\n   */\r\n  columns: {\r\n    type: Array as PropType<ColumnProp[]>,\r\n    required: true\r\n  },\r\n  /**\r\n   * Data record array to be displayed\r\n   */\r\n  dataSources: {\r\n    type: Array as PropType<any[]>,\r\n  },\r\n  /** \r\n   * Border to all cells\r\n  */\r\n  bordered: {\r\n    type: Boolean,\r\n    default: false,\r\n  },\r\n  /** \r\n   * Whether table is striped\r\n  */\r\n  striped: {\r\n    type: Boolean,\r\n    default: false,\r\n  },\r\n  /** \r\n   * Makes the cells narrower\r\n  */\r\n  narrowed: {\r\n    type: Boolean,\r\n    default: false,\r\n  },\r\n  /** \r\n   * Rows are highlighted when hovering\r\n  */\r\n  hoverable: {\r\n    type: Boolean,\r\n    default: false,\r\n  },\r\n  /** \r\n   * Set sticky header and scroll bar\r\n  */\r\n  sticky: {\r\n    type: Boolean,\r\n    default: false,\r\n  },\r\n  /** \r\n   * Whether the table can be scrollable\r\n  */\r\n  scroll: {\r\n    type: Boolean,\r\n    default: false,\r\n  },\r\n  /** \r\n   * Height of this table. Works only when the \"scroll\" parameter is enabled\r\n  */\r\n  height: {\r\n    type: [String, Number] as PropType<number | string>,\r\n    default: 'inherit',\r\n  },\r\n});\r\n\r\nconst columnsHeader = computed(() => {\r\n  const ar: ColumnTable[][] = [];\r\n  const columns_fixed_left: { [key: string]: ColumnTable } = new Map();\r\n  const columns_fixed_right: { [key: string]: ColumnTable } = new Map();\r\n  let i = 0;\r\n  const generateTh = (columns: ColumnProp[], level = 0): ColumnTable[] => {\r\n    if (!ar[level]) {\r\n        ar[level] = [];\r\n    }\r\n    \r\n    const c: ColumnTable[] = columns.map(column => {\r\n      const _column: ColumnTable = { \r\n        ...column, \r\n        children: undefined \r\n      };\r\n      \r\n      if (column.children) {\r\n        _column.children = generateTh(column.children, level + 1);\r\n      } else {\r\n        if (column.fixed === 'left' || column.fixed === true) {\r\n          columns_fixed_left.set(_column.dataIndex, _column);\r\n        }\r\n\r\n        if (column.fixed === 'right') {\r\n          columns_fixed_right.set(_column.dataIndex, _column);\r\n        }\r\n      }\r\n\r\n      _column.colspan = _column.children?.reduce((acc: number, cur: ColumnTable) => cur.children ? acc + cur.colspan - 1 : acc, _column.children.length) || 1\r\n      _column.sort = i++;\r\n\r\n      return _column;\r\n    });\r\n    ar[level] = ar[level].concat(c);\r\n    return c;\r\n  };\r\n\r\n  generateTh(props.columns);\r\n\r\n  const getWidthColumn = (width: string | number) => {\r\n    if (!width) {\r\n      return 0;\r\n    }\r\n\r\n    if (typeof width === 'number') {\r\n      return width;\r\n    }\r\n    return parseFloat(width.replace(\"px\", \"\"));\r\n  };\r\n\r\n  const ar_left: ColumnTable[] = [...columns_fixed_left.values()];\r\n  ar_left.sort((a, b) => a.sort - b.sort);\r\n\r\n  let fixedLeft = 0;\r\n  for (const column of ar_left) {\r\n    const _column = columns_fixed_left.get(column.dataIndex);\r\n    _column.fixedLeft = fixedLeft;\r\n\r\n    const numberValue = getWidthColumn(_column.width);\r\n    fixedLeft += numberValue;\r\n  }\r\n\r\n  const ar_right: ColumnTable[] = [...columns_fixed_right.values()];\r\n  ar_right.sort((a, b) => b.sort - a.sort);\r\n\r\n  let fixedRight = 0;\r\n  for (const column of ar_right) {\r\n    const _column = columns_fixed_right.get(column.dataIndex);\r\n    _column.fixedRight = fixedRight;\r\n\r\n    const numberValue = getWidthColumn(_column.width);\r\n    fixedRight += numberValue;\r\n  }\r\n\r\n  return ar;\r\n});\r\n\r\nconst columnsBody = computed(() => {\r\n  const sort = [...columnsHeader.value.flat().filter(column => !column.children)];\r\n  sort.sort((a, b) => a.sort - b.sort);\r\n  return sort;\r\n});\r\n\r\nonMounted(() => {\r\n  \r\n  \r\n})\r\n\r\n</script>\r\n\r\n<style scoped>\r\n.table-scroll {\r\n  position: relative;\r\n  width:100%;\r\n  z-index: 1;\r\n  margin: auto;\r\n  overflow: auto;\r\n  height: inherit;\r\n}\r\n\r\n.table-scroll table {\r\n  width: 100%;\r\n  min-width: max-content;\r\n}\r\n\r\n.table-sticky table {\r\n  /* width: 100%;\r\n  min-width: max-content; */\r\n  border-collapse: separate;\r\n  border-spacing: 0;\r\n}\r\n.table-wrap {\r\n  position: relative;\r\n}\r\n.table-scroll th,\r\n.table-scroll td {\r\n  vertical-align: top;\r\n  overflow-wrap: break-word;\r\n}\r\n.table-sticky thead {\r\n  position: -webkit-sticky;\r\n  position: sticky;\r\n  top: 0;\r\n  z-index: 1;\r\n}\r\n\r\n.table-sticky thead th {\r\n  background: #fff;\r\n}\r\n\r\n.table-sticky tfoot,\r\n.table-sticky tfoot th,\r\n.table-sticky tfoot td {\r\n  position: -webkit-sticky;\r\n  position: sticky;\r\n  bottom: 0;\r\n}\r\n\r\n\r\n@media screen and (max-width:701px) {\r\n\t.table-scroll{box-shadow:0 0 10px rgba(0,0,0,0.5);}\r\n\ttable.mobile-optimised {\r\n\t\tword-wrap:break-word;\r\n\t}\r\n\ttable.mobile-optimised thead,\r\n\ttable.mobile-optimised tfoot  {\r\n\t\tdisplay:none\r\n\t}\r\n\ttable.mobile-optimised td,\r\n\ttable.mobile-optimised tbody th  {\r\n\t\tdisplay:block;\r\n\t\tfloat:left;/* ie9 and under hack */\r\n\t\twidth:100%;\r\n\t\tclear:both;\r\n\t\t/* background:#ffff; */\r\n\t\tpadding:10px 5px;\r\n\t\t-moz-box-sizing:border-box;\r\n\t\t-webkit-box-sizing:border-box;\r\n\t\tbox-sizing:border-box;\r\n\t}\r\n\ttable.mobile-optimised tbody tr:nth-child(odd) td,\r\n\ttable.mobile-optimised tbody tr:nth-child(odd) th{\r\n\t\t/* background:#ccc; */\r\n\t} \r\n\ttable.mobile-optimised tbody, table.mobile-optimised tr {\r\n\t\tdisplay:block\r\n\t}\r\n\t.mobile-optimised td:before,\r\n\t.mobile-optimised tbody th:before  {\r\n\t\tcontent:attr(data-th);\r\n\t\tdisplay:block;\r\n\t\tfont-weight:bold;\r\n\t\tmargin:0 0 2px;\r\n\t\t/* color:#000; */\r\n\t}\r\n\t.mobile-optimised tbody tr {\r\n\t\t/* border-bottom:1px solid #00c0f3 */\r\n\t}\r\n}\r\n\r\n.column-fixed-left {\r\n  position: -webkit-sticky;\r\n  position: sticky;\r\n  left: 0;\r\n  /* z-index: 2; */\r\n  background: #fff;\r\n}\r\n\r\n.column-fixed-right {\r\n  position: -webkit-sticky;\r\n  position: sticky;\r\n  right: 0;\r\n  /* z-index: 2; */\r\n  background: #fff;\r\n}\r\n\r\n</style>\r\n"],"names":["props","__props","columnsHeader","computed","ar","columns_fixed_left","columns_fixed_right","i","generateTh","columns","level","c","column","_column","_a","acc","cur","getWidthColumn","width","ar_left","a","b","fixedLeft","numberValue","ar_right","fixedRight","columnsBody","sort","onMounted"],"mappings":"siBA4FA,MAAMA,EAAQC,EAuERC,EAAgBC,EAAS,IAAM,CACnC,MAAMC,EAAsB,CAAA,EACtBC,MAAyD,IACzDC,MAA0D,IAChE,IAAIC,EAAI,EACR,MAAMC,EAAa,CAACC,EAAuBC,EAAQ,IAAqB,CACjEN,EAAGM,CAAK,IACNN,EAAAM,CAAK,EAAI,IAGV,MAAAC,EAAmBF,EAAQ,IAAcG,GAAA,OAC7C,MAAMC,EAAuB,CAC3B,GAAGD,EACH,SAAU,MAAA,EAGZ,OAAIA,EAAO,SACTC,EAAQ,SAAWL,EAAWI,EAAO,SAAUF,EAAQ,CAAC,IAEpDE,EAAO,QAAU,QAAUA,EAAO,QAAU,KAC3BP,EAAA,IAAIQ,EAAQ,UAAWA,CAAO,EAG/CD,EAAO,QAAU,SACCN,EAAA,IAAIO,EAAQ,UAAWA,CAAO,GAItDA,EAAQ,UAAUC,EAAAD,EAAQ,WAAR,YAAAC,EAAkB,OAAO,CAACC,EAAaC,IAAqBA,EAAI,SAAWD,EAAMC,EAAI,QAAU,EAAID,EAAKF,EAAQ,SAAS,UAAW,EACtJA,EAAQ,KAAON,IAERM,CAAA,CACR,EACD,OAAAT,EAAGM,CAAK,EAAIN,EAAGM,CAAK,EAAE,OAAOC,CAAC,EACvBA,CAAA,EAGTH,EAAWR,EAAM,OAAO,EAElB,MAAAiB,EAAkBC,GACjBA,EAID,OAAOA,GAAU,SACZA,EAEF,WAAWA,EAAM,QAAQ,KAAM,EAAE,CAAC,EANhC,EASLC,EAAyB,CAAC,GAAGd,EAAmB,OAAQ,CAAA,EAC9Dc,EAAQ,KAAK,CAACC,EAAGC,IAAMD,EAAE,KAAOC,EAAE,IAAI,EAEtC,IAAIC,EAAY,EAChB,UAAWV,KAAUO,EAAS,CAC5B,MAAMN,EAAUR,EAAmB,IAAIO,EAAO,SAAS,EACvDC,EAAQ,UAAYS,EAEd,MAAAC,EAAcN,EAAeJ,EAAQ,KAAK,EACnCS,GAAAC,CACf,CAEA,MAAMC,EAA0B,CAAC,GAAGlB,EAAoB,OAAQ,CAAA,EAChEkB,EAAS,KAAK,CAACJ,EAAGC,IAAMA,EAAE,KAAOD,EAAE,IAAI,EAEvC,IAAIK,EAAa,EACjB,UAAWb,KAAUY,EAAU,CAC7B,MAAMX,EAAUP,EAAoB,IAAIM,EAAO,SAAS,EACxDC,EAAQ,WAAaY,EAEf,MAAAF,EAAcN,EAAeJ,EAAQ,KAAK,EAClCY,GAAAF,CAChB,CAEO,OAAAnB,CAAA,CACR,EAEKsB,EAAcvB,EAAS,IAAM,CACjC,MAAMwB,EAAO,CAAC,GAAGzB,EAAc,MAAM,KAAA,EAAO,OAAiBU,GAAA,CAACA,EAAO,QAAQ,CAAC,EAC9E,OAAAe,EAAK,KAAK,CAACP,EAAGC,IAAMD,EAAE,KAAOC,EAAE,IAAI,EAC5BM,CAAA,CACR,EAED,OAAAC,EAAU,IAAM,CAAA,CAGf;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}